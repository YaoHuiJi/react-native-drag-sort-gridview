var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(exports,"__esModule",{value:true});exports.default=void 0;var _slicedToArray2=_interopRequireDefault(require("@babel/runtime/helpers/slicedToArray"));var _react=require("react");var _reactAddonsUpdate=_interopRequireDefault(require("react-addons-update"));var _reactNative=require("react-native");var _default=function _default(_ref){var data=_ref.data,debounce=_ref.debounce,listWidth=_ref.listWidth,numColumns=_ref.numColumns,onOrderChanged=_ref.onOrderChanged;var _useState=(0,_react.useState)(true),_useState2=(0,_slicedToArray2.default)(_useState,2),isEnableScroll=_useState2[0],setIsEnableScroll=_useState2[1];var _useState3=(0,_react.useState)(undefined),_useState4=(0,_slicedToArray2.default)(_useState3,2),dragIndex=_useState4[0],setDragIndex=_useState4[1];var _useState5=(0,_react.useState)(undefined),_useState6=(0,_slicedToArray2.default)(_useState5,2),dragToIndex=_useState6[0],setDragToIndex=_useState6[1];var timerRef=(0,_react.useRef)();var itemWidth=(0,_react.useMemo)(function(){return(listWidth||_reactNative.Dimensions.get('screen').width)/(numColumns||1);},[listWidth,numColumns]);var onStartDrag=(0,_react.useCallback)(function(index){setIsEnableScroll(false);setDragIndex(index);},[]);var updateDragToIndex=(0,_react.useCallback)(function(index){if(debounce===undefined){setDragToIndex(index);return;}if(timerRef.current!==undefined){clearTimeout(timerRef.current);}timerRef.current=setTimeout(function(){setDragToIndex(index);},debounce);},[debounce]);var onEndDrag=(0,_react.useCallback)(function(from,to){setIsEnableScroll(true);setDragIndex(undefined);setDragToIndex(undefined);if(from===to){return;}var temp=data[from];var orderedData=(0,_reactAddonsUpdate.default)(data,{$splice:[[from,1],[to,0,temp]]});onOrderChanged(orderedData,from,to);},[data,onOrderChanged]);return{dragIndex:dragIndex,dragToIndex:dragToIndex,isEnableScroll:isEnableScroll,itemWidth:itemWidth,onStartDrag:onStartDrag,updateDragToIndex:updateDragToIndex,onEndDrag:onEndDrag};};exports.default=_default;
//# sourceMappingURL=useFlatListDraggableHooks.js.map